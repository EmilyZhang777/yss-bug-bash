{namespace cobalt.molecules}

/**
 * Class passthroughs
 * @param baseClass
 *
 * Content params
 * @param content
 *
 * Config params
 * @param? readMoreText
 * @param? readLessText
 * @param? truncatedTextLength // Number of characters to truncate to
 *
 * Meta params
 * @param? itemprop
 */
{template .Truncate}

  {let $class}
    {call cobalt.helpers.class_builder data="all"}
      {param name: 'Truncate' /}
    {/call}
  {/let}
  <div class="{$class} js-truncate">
    {call cobalt.atoms.Text data="all"}
      {param baseClass: 'Truncate' /}
      {param content}{$content |truncate:$truncatedTextLength ?: 150,true |changeNewlineToBr}{/param}
      {param jsClass: 'js-truncate-text-short' /}
      {param modifiers: ['short'] /}
      {param tag: 'span' /}
    {/call}
    {call cobalt.atoms.Text data="all"}
      {param baseClass: 'Truncate' /}
      {param content}{$content |changeNewlineToBr}{/param}
      {param jsClass: 'js-truncate-text-full' /}
      {param modifiers: ['full'] /}
      {param tag: 'span' /}
    {/call}
    {call cobalt.atoms.Button}
      {param baseClass: 'Truncate' /}
      {param subClass: 'toggle' /}
      {param content}
        <span class="Truncate-toggleText Truncate-toggleText--readMore">
          {if $readMoreText}
            {$readMoreText}
          {else}
            {msg desc="Read more text"}
              Read More
            {/msg}
          {/if}
        </span>
        <span class="Truncate-toggleText Truncate-toggleText--readLess">
          {if $readLessText}
            {$readLessText}
          {else}
            {msg desc="Read less text"}
              Read Less
            {/msg}
          {/if}
        </span>
      {/param}
      {param jsClass: 'js-truncate-toggle' /}
    {/call}
  </div>
{/template}
