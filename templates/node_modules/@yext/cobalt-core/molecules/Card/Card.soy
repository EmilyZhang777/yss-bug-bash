{namespace cobalt.molecules}

/**
 * Class passthroughs
 * @param baseClass
 * @param? subClass
 * @param? jsClass
 * @param? modifiers
 * @param? attributes
 *
 * @param content
 */
{template .Card}
  {let $class}
    {call cobalt.helpers.class_builder data="all"}
      {param name: 'Card' /}
    {/call}
  {/let}
  {let $attribute}
    {call cobalt.helpers.attribute_builder data="all" /}
  {/let}

  <article
    class="{$class}"
    {if $attribute} {$attribute |noAutoescape}{/if}
  >
    {foreach $group in $content}
      {if length($content) > 1}
        <div class="Card-group">
      {/if}
        {foreach $field in $group}
          {if $field.value}
            {let $fieldType}{$field.type|casing:'lower'}{/let}
            {switch $fieldType}
              {case 'image'}
                {call cobalt.atoms.Image data="all"}
                  {param image: $field.value /}
                {/call}
              {case 'heading'}
                {call cobalt.atoms.Heading data="all"}
                  {param content: $field.value /}
                  {param itemprop: $field.schema /}
                  {param hLevel: 3 /}
                {/call}
              {case 'text'}
                {call cobalt.atoms.Text data="all"}
                  {param content: $field.value /}
                  {param itemprop: $field.schema /}
                {/call}
              {case 'link'}
                {if $field.value.href and $field.value.copy}
                  {call cobalt.atoms.Link data="all"}
                    {param content: $field.value.copy /}
                    {param href: $field.value.href /}
                    {param itemprop: $field.schema /}
                  {/call}
                {/if}
              {default}
                {$field.value |noAutoescape}
            {/switch}
          {/if}
        {/foreach}
      {if length($content) > 1}
        </div>
      {/if}
    {/foreach}
  </article>
{/template}
